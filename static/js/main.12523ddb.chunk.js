(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{173:function(e,t,n){e.exports=n(319)},178:function(e,t,n){},180:function(e,t,n){},184:function(e,t,n){},188:function(e,t,n){},290:function(e,t,n){},294:function(e,t,n){},316:function(e,t,n){},319:function(e,t,n){"use strict";n.r(t);var a,r,i,l,c,o,s,u,h,p,f,b,m,d,v,y,O,g,w,j,k,F,x=n(1),E=n.n(x),_=n(8),N=n.n(_),A=(n(178),n(12)),S=n(22),P=n(24),C=n(23),z=n(25),I=(n(180),n(182),n(184),n(9)),D=n.n(I),M=n(17),L=n(337),U=n(326),B=n(327),T=n(334),R=n(328),G=n(335),q=(n(188),n(20)),J=Object(q.b)("store")(a=Object(q.c)(a=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.key,n=e.store,a=e.audio,r=e.playFile;return E.a.createElement(V,{key:t,audio:a,playFile:r,isNow:n.FilesStore.playNow&&n.FilesStore.playNow.fullPath===a.fullPath})}}]),t}(E.a.Component))||a)||a,V=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.key,n=e.isNow,a=e.audio,r=e.playFile;return E.a.createElement("div",{className:"audio-item ".concat(n&&"now"),key:t,onClick:function(){return r(a.fullPath)}},E.a.createElement("div",{className:"audio-item__art",style:{marginRight:"12px"}}),E.a.createElement("div",{className:"audio-item__info"},E.a.createElement("p",{className:"audio-item__title"},a.title),E.a.createElement("p",{className:"audio-item__bandName"},a.author)))}}]),t}(E.a.PureComponent),W=J,$=n(236),H=n(241),K=n(30),Q=T.a.Panel,X=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.folder,n=e.content;return E.a.createElement($.a,{type:"flex",justify:"center",align:"middle",className:"folder-item"},E.a.createElement(H.a,{span:24},E.a.createElement(T.a,null,E.a.createElement(Q,{header:E.a.createElement("div",{className:"folder-item__header"},E.a.createElement(K.a,{className:"folder-item__icon",type:"folder"}),E.a.createElement("div",{className:"folder-item__title"},t.title)),key:"1"},n))))}}]),t}(E.a.PureComponent),Y=0,Z=function(){return Y++},ee=(T.a.Panel,Object(q.b)("store")(r=Object(q.c)(r=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={playlist:[]},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchFiles()}},{key:"makeList",value:function(e){var t=this;if(e.files&&e.files.length>0)return e.files.map(function(e){return t.makeItem(e)})}},{key:"makeItem",value:function(e){if("File"===e.type){var t=e.content;return E.a.createElement(W,{audio:t,key:Z(),playFile:this.props.playFile})}var n=e.content,a=this.makeList(n);if(a&&a.filter(function(e){return e}).length>0)return E.a.createElement(X,{key:Z(),content:a,folder:e})}},{key:"render",value:function(){return this.props.files?E.a.createElement("div",{className:"playlist"},this.makeList(this.props.files)):E.a.createElement(R.a,{itemLayout:"horizontal",renderItem:function(e){return E.a.createElement(R.a.Item,{className:"audio-item"},E.a.createElement(G.a,{active:!0,paragraph:{rows:0,width:100}}))},dataSource:[1,2,3,4,5]})}}]),t}(E.a.Component))||r)||r),te=Object(q.c)(ee),ne=n(166),ae=n.n(ne),re=n(120),ie=n(292),le=n(329),ce=n(336),oe=n(121),se=n(122),ue=(n(290),function e(){Object(A.a)(this,e),this.files=[]}),he=function e(t,n,a,r){Object(A.a)(this,e),this.title=void 0,this.type=void 0,this.content=void 0,this.itemId=void 0,this.title=t,this.type=n,this.content=a,this.itemId=r},pe=n(15),fe=n(16),be=(n(109),n(11)),me=(i=function e(t,n,a,r,i){Object(A.a)(this,e),this.title=void 0,this.album=void 0,this.author=void 0,this.fullPath=void 0,Object(pe.a)(this,"duration",l,this),this.title=t,this.album=n,this.author=a,this.duration=r,this.fullPath=i},l=Object(fe.a)(i.prototype,"duration",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i),de=function e(t,n,a){Object(A.a)(this,e),this.audio=void 0,this.fullPath=void 0,this.URL=void 0,this.audio=t,this.fullPath=n,this.URL=a},ve=function e(t){Object(A.a)(this,e),this.userName=void 0,this.userName=t},ye=function e(t){var n=this;Object(A.a)(this,e),this.client=void 0,this.cloudSource="DropBox",this.mapOfFiles=[],this.mode=void 0,this.checkspace=void 0,this.normalize=function(e){var t=new ue;return e.filter(function(e){return"folder"===e[".tag"]}).map(function(e){return e.path_lower.split("/").filter(function(e){return e})}).sort(function(e,t){return e.length>t.length?1:e.length===t.length?0:-1}).forEach(function(e){var n=t;e.forEach(function(e){var t=new ue;if(n.files){var a=n.files.find(function(t){return t.title===e});a?n=a.content:(n.files.push(new he(e,"Folder",t)),n=t)}else n.files=[new he(e,"Folder",t)],n=t})}),e.filter(function(e){return"file"===e[".tag"]&&e.name.lastIndexOf(".mp3")===e.name.length-4}).map(function(e){return e.path_lower.split("/").filter(function(e){return e})}).sort(function(e,t){return e.length>t.length?1:e.length===t.length?0:-1}).forEach(function(a){var r=t,i="/"+a.join("/"),l=e.find(function(e){return e.path_lower===i}),c=new he(l.name,"File",new me(l.name,a[a.length-2],a[a.length-2],300,i));n.mapOfFiles.push(c),a.forEach(function(e,t){1===a.length||a.length-1===t?r.files?r.files.push(c):r.files=[c]:r=r.files.find(function(t){return t.title===e}).content})}),t},this.getAllFiles=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.filesListFolder({recursive:!0,path:""});case 2:if(t=e.sent){e.next=5;break}throw new Error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u0439\u043b\u043e\u0432!");case 5:return a=n.normalize(t.entries),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)})),this.playFile=function(){var e=Object(M.a)(D.a.mark(function e(t){var a,r,i,l,c;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.split("/"),r=a[a.length-2],e.next=4,n.client.filesGetTemporaryLink({path:t});case 4:return i=e.sent,l=i.metadata,c=new me(l.name,r,r,0,i.metadata.path_lower||""),e.abrupt("return",new de(c,l.path_lower||"",i.link));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getNext=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}))===n.mapOfFiles.length-1?0:a+1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getPrev=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=0===(a=n.mapOfFiles.findIndex(function(e){return e.content.fullPath===t}))?0:a-1,e.abrupt("return",n.playFile(n.mapOfFiles[a].content.fullPath));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.authorize=function(){},this.getMe=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.usersGetCurrentAccount();case 2:return t=e.sent,e.abrupt("return",new ve(t.name.display_name));case 4:case"end":return e.stop()}},e,this)})),this.getAllFilesAlbums=Object(M.a)(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getAllFiles();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),this.client=t,this.mode="",this.checkspace="album"},Oe=n(330),ge=n(332),we=function e(t){var n=this;Object(A.a)(this,e),this.client=void 0,this.cloudSource="OneDrive",this.mapOfFiles=[],this.mode=void 0,this.checkspace=void 0,this.filesetFiles=void 0,this.normalize=function(){var e=Object(M.a)(D.a.mark(function e(t){var a,r,i,l,c,o,s;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=new ue).files=[],!t.children){e.next=24;break}r=t.children.filter(function(e){return e.folder||e.audio}).sort(function(e,t){return e.folder&&t.audio?0:e.folder&&t.folder?0:1}),i=0;case 5:if(!(i<r.length)){e.next=24;break}if(!(l=r[i]).folder){e.next=20;break}return e.next=10,n.client.api("/me".concat(l.parentReference.path,"/").concat(l.name)).expand("children").get();case 10:return c=e.sent,e.t0=he,e.t1=l.name,e.next=15,n.normalize(c);case 15:e.t2=e.sent,o=new e.t0(e.t1,"Folder",e.t2),a.files.push(o),e.next=21;break;case 20:l.audio&&(s=new he(l.name,"File",new me(l.audio.title||l.name,l.audio.album||t.name,l.audio.artist||t.name,l.audio.duration/1e3,l["@microsoft.graph.downloadUrl"]),l.id),n.mapOfFiles.push(s),a.files.push(s));case 21:i++,e.next=5;break;case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.normalizeAlbums=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ue,a=n.mapOfFiles.filter(function(e){return"File"===e.type}),t.files=Oe.a(function(e){return new he(e.content.author,"Folder",new ue)},ge.a(function(e){return e.content.author},a)),t.files.forEach(function(e){var t=a.filter(function(t){return t.content.author===e.title}),n=e.content.files=Oe.a(function(e){return new he(e.content.album,"Folder",new ue)},ge.a(function(e){return e.content.album},t));n.forEach(function(e){e.content.files=t.filter(function(t){return t.content.album===e.title})}),e.content.files=n}),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)})),this.getAllFiles=Object(M.a)(D.a.mark(function e(){var t,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.api("/me/drive/root:/music").expand("children").get();case 2:return t=e.sent,n.mapOfFiles=[],e.next=6,n.normalize(t);case 6:return a=e.sent,n.filesetFiles=a,e.next=10,a;case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)})),this.playFile=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.mapOfFiles.find(function(e){return e.content.fullPath===t}),e.abrupt("return",new de(a.content,t,t));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.authorize=function(){},this.getMe=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.client.api("/me").get();case 2:return t=e.sent,e.abrupt("return",new ve(t.displayName||t.givenName+" "+t.surname));case 4:case"end":return e.stop()}},e,this)})),this.getAllFilesAlbums=Object(M.a)(D.a.mark(function e(){var t;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.normalizeAlbums();case 2:return t=e.sent,n.filesetFiles=t,e.next=6,t;case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)})),this.client=t,this.mode="",this.checkspace="album"},je=Object(q.b)("store")(c=Object(q.c)(c=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={OAuthUrl:""},n.authorizedByDropbox=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n.props.store.FilesStore,localStorage.setItem("access_token",t.access_token),a.setClient(new ye(new re.Dropbox({accessToken:t.access_token})));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.authorizedByOneDrive=function(){var e=Object(M.a)(D.a.mark(function e(t){var a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.props.store.FilesStore,n.props.store.AuthStore,(a=localStorage.getItem("access_token")||t.access_token)&&localStorage.setItem("access_token",a),t.id_token&&localStorage.setItem("id_token",t.id_token);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleOnedriveAuth=function(){localStorage.setItem("cloudSource","OneDrive"),new oe.UserAgentApplication("b07f11e5-8934-40a1-a327-1859322ed1c6",null,function(){}).loginRedirect(["files.read.all"])},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.store,n=t.AuthStore,a=t.FilesStore,r=new re.Dropbox({clientId:"7174q8sh3aiss51"}),i=r.getAuthenticationUrl(document.location.href);i&&this.setState({OAuthUrl:i});var l=localStorage.getItem("access_token"),c=localStorage.getItem("cloudSource");l&&"Dropbox"===c&&(n.setLoading(!0),r.setAccessToken(l),r.usersGetCurrentAccount().then(function(t){n.setLoading(!1),n.setIsAuthed(),a.setClient(new ye(r)),e.props.history.push("/")}).catch(function(e){n.setLoading(!1)}));var o=localStorage.getItem("access_token");o&&"OneDrive"===c&&(a.setClient(new we(se.Client.init({authProvider:function(e){e(null,o)}}))),n.setIsAuthed(),this.props.history.push("/"));var s=new oe.UserAgentApplication("b07f11e5-8934-40a1-a327-1859322ed1c6",null,function(){});if(!localStorage.getItem("id_token")||o&&"OneDrive"===c||s.acquireTokenSilent(["files.read.all"]).then(function(){var t=Object(M.a)(D.a.mark(function t(r){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.setItem("access_token",r),a.setClient(new we(se.Client.init({authProvider:function(e){e(null,r)}}))),n.setIsAuthed(),e.props.history.push("/");case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f access_token Onedrive",e)}),this.props.location.hash){var u=ae.a.parse(this.props.location.hash);switch(localStorage.getItem("cloudSource")){case"Dropbox":this.authorizedByDropbox(u);case"OneDrive":this.authorizedByOneDrive(u)}}}},{key:"render",value:function(){var e=this.props.store.AuthStore;return E.a.createElement("div",{className:"auth-container"},E.a.createElement(le.a,{className:"auth-container__authbox",title:"\u0412\u0445\u043e\u0434",loading:e.loading},E.a.createElement("p",null,"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439\u0442\u0435! \u0414\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0412\u0430\u0448\u0435\u043c\u0443 \u043e\u0431\u043b\u0430\u043a\u0443 \u043d\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435."," "),E.a.createElement("p",null,"\u041c\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0438\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ",E.a.createElement("b",null,"OneDrive")," \u0442.\u043a \u043e\u043d \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u0435\u0442\u0430\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u0444\u0430\u0439\u043b\u0430\u043c (\u0430\u043b\u044c\u0431\u043e\u043c, \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0442\u043e\u0440, \u043e\u0431\u043b\u043e\u0436\u043a\u0430 \u0438 \u0442.\u0434)"),E.a.createElement(ce.a,{className:"auth-container__button",onClick:function(){localStorage.setItem("cloudSource","Dropbox")},type:"primary",href:this.state.OAuthUrl},E.a.createElement(K.a,{type:"dropbox"}),"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Dropbox"),E.a.createElement(ce.a,{className:"auth-container__button",type:"primary",onClick:this.handleOnedriveAuth},E.a.createElement(K.a,{type:"windows"}),"\u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 OneDrive")))}}]),t}(E.a.Component))||c)||c,ke=Object(q.b)("store")(Object(ie.a)(je)),Fe=n(251),xe=n(69),Ee=n(333),_e=(n(294),n(168)),Ne=n.n(_e),Ae=function(e){var t=Math.trunc(e),n=t%60;return"".concat(Math.floor(t/60),":").concat(n<10?"0"+n:n)},Se=n(62),Pe=Object(q.b)("store")(o=Object(q.c)(o=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={progress:{played:0,playedSeconds:0,loaded:0,loadedSeconds:0},repeat:{value:"",title:""},shuffle:{value:"",title:""},volume:50,playback:0},n.player=void 0,n.handleChangeVolume=function(e){n.setState({volume:Number(e)})},n.handleChangeMode=function(e){var t=n.props.store;if(Se.isMobile&&"song"===n.state[e].value&&"shuffle"==e)return e="repeat",n.setState({repeat:{title:"\u0430\u043b\u044c\u0431\u043e\u043c",value:"album"}}),t.FilesStore.client.mode=e,void(t.FilesStore.client.checkspace="album");var a={title:"",value:""},r={title:"",value:""};switch(t.FilesStore.client.mode=e,n.state[e].value){case"":n.setState(Object(xe.a)({repeat:a,shuffle:r},e,{title:"\u0430\u043b\u044c\u0431\u043e\u043c",value:"album"})),t.FilesStore.client.checkspace="album";break;case"album":n.setState(Object(xe.a)({repeat:a,shuffle:r},e,{title:"\u043f\u0435\u0441\u043d\u044f",value:"song"})),t.FilesStore.client.checkspace="song";break;case"song":n.setState(Object(xe.a)({repeat:a,shuffle:r},e,{value:"",title:""})),t.FilesStore.client.checkspace="",t.FilesStore.client.mode="";break;default:n.setState(Object(xe.a)({repeat:a,shuffle:r},e,{value:"",title:""}))}},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store.FilesStore;return E.a.createElement("div",{className:"player",style:{marginBottom:"12px"}},E.a.createElement(Ne.a,{ref:function(t){return e.player=t},style:{position:"absolute",zIndex:-5},onDuration:function(e){t.playNow.audio.duration=e},onProgress:function(t){e.setState({progress:t})},width:"1px",height:"1px",loop:"song"===this.state.repeat.value,fileConfig:{forceAudio:!0},url:t.playNow.URL,playing:t.isPlay,volume:this.state.volume/100,onEnded:t.getNext}),E.a.createElement(K.a,{type:t.isPlay?"pause-circle":"play-circle",theme:"filled",className:"player-btn__play",onClick:function(){t.switchPlay()}}),E.a.createElement(K.a,{type:"step-backward",theme:"filled",className:"player-btn__step",onClick:t.getPrev}),E.a.createElement(K.a,{type:"step-forward",theme:"filled",className:"player-btn__step",onClick:t.getNext}),E.a.createElement("div",{className:"slider-block"},E.a.createElement("div",{className:"slider-block__meta"},E.a.createElement("div",{className:"slider-block__naming"},E.a.createElement("p",{className:"slider-block__title"},t.playNow.audio.title),t.playNow.audio.author&&E.a.createElement("p",{className:"slider-block__author"},t.playNow.audio.author)),E.a.createElement("p",{className:"slider-block__time"},E.a.createElement("span",null,Ae(this.state.progress.playedSeconds),!Se.isMobile&&" / "+Ae(t.playNow.audio.duration)))),E.a.createElement(Ee.a,{className:"slider-block__slider",max:t.playNow.audio.duration,tipFormatter:function(e){return Ae(e)},onChange:function(t){e.player.seekTo(Number(t))},value:this.state.progress.playedSeconds})),!Se.isMobile&&E.a.createElement(Ee.a,{className:"player__volume",max:100,value:this.state.volume,onChange:this.handleChangeVolume}),E.a.createElement("div",{className:"player__additional"},E.a.createElement("div",{className:"shuffle-group"},Se.isMobile&&this.state.repeat.value?E.a.createElement(x.Fragment,null,E.a.createElement(K.a,{className:"player-btn__repeat ".concat(this.state.repeat.value&&"active"),type:"reload",onClick:function(){e.handleChangeMode("repeat")}}),E.a.createElement("p",{className:"repeat-group__label"},this.state.repeat.title)):E.a.createElement(x.Fragment,null,E.a.createElement(K.a,{className:"player-btn__shuffle ".concat(this.state.shuffle.value&&"active"),type:"swap",onClick:function(){e.handleChangeMode("shuffle")}}),E.a.createElement("p",{className:"repeat-group__label"},this.state.shuffle.title))),!Se.isMobile&&E.a.createElement("div",{className:"repeat-group"},E.a.createElement(K.a,{className:"player-btn__repeat ".concat(this.state.repeat.value&&"active"),type:"reload",onClick:function(){e.handleChangeMode("repeat")}}),E.a.createElement("p",{className:"repeat-group__label"},this.state.repeat.title))))}}]),t}(E.a.Component))||o)||o,Ce=(n(316),n(325)),ze=n(320),Ie=Object(q.b)("store")(s=Object(q.c)(s=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).handleLogOut=function(){localStorage.removeItem("cloudSource"),localStorage.removeItem("id_token"),localStorage.removeItem("access_token"),window.location.href="/"},n.handleChangeDest=function(e){e?n.props.store.FilesStore.fetchFilesAlbum():n.props.store.FilesStore.fetchFiles()},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark(function e(){var t,n,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.store,n=t.FilesStore,a=t.AuthStore,e.t0=a,e.next=4,n.client.getMe();case 4:e.t1=e.sent,e.t0.setUser.call(e.t0,e.t1);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.store.AuthStore;return E.a.createElement("div",{className:"top-bar"},E.a.createElement("div",{className:"top-bar__switch-dest"},E.a.createElement(Ce.a,{onChange:this.handleChangeDest,unCheckedChildren:E.a.createElement(K.a,{type:"folder"}),checkedChildren:E.a.createElement("div",{className:"top-bar__switch-dest_icon"})})),E.a.createElement("div",{className:"top-bar__user-icon"},E.a.createElement("p",null,e.user.userName),E.a.createElement(ze.a,{title:"\u0412\u044b\u0445\u043e\u0434"},E.a.createElement(K.a,{type:"logout",onClick:this.handleLogOut}))))}}]),t}(E.a.Component))||s)||s,De=Object(q.b)("store")(u=Object(q.c)(u=function(e){function t(){var e,n;Object(A.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(P.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).fetchFiles=function(){n.props.store.FilesStore.fetchFiles()},n.playFile=function(e){n.props.store.FilesStore.playFile(e)},n}return Object(z.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object(M.a)(D.a.mark(function e(){var t,n,a;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=this.props.store,a=n.AuthStore,n.FilesStore,t.location.hash||(a.OAuthPassed?t.history.push("/"):t.history.push("/auth"));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.store,t=e.FilesStore,n=e.AuthStore;return E.a.createElement("div",{className:"main-container"},E.a.createElement(L.a,null,E.a.createElement(U.a,{path:"/auth"},E.a.createElement(ke,null)),E.a.createElement(U.a,{path:"/"},n.OAuthPassed?E.a.createElement(x.Fragment,null,E.a.createElement(Ie,null),E.a.createElement(Pe,null),E.a.createElement("div",{style:{marginTop:"12px"}},E.a.createElement(te,{files:t.files,fetchFiles:this.fetchFiles,playFile:this.playFile}))):E.a.createElement(Fe.a,null))))}}]),t}(E.a.Component))||u)||u,Me=Object(B.a)(De),Le=n(331),Ue=function(e){function t(){return Object(A.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return E.a.createElement(Le.a,null,E.a.createElement("div",{className:"App"},E.a.createElement(Me,null)))}}]),t}(x.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be,Te,Re,Ge,qe,Je,Ve,We,$e,He,Ke,Qe,Xe,Ye,Ze,et,tt,nt,at,rt,it,lt,ct,ot,st,ut,ht,pt,ft,bt,mt=new(h=be.d.bound,p=be.d.bound,f=be.d.bound,b=be.d.bound,m=function e(){Object(A.a)(this,e),Object(pe.a)(this,"OAuthUrl",d,this),Object(pe.a)(this,"OAuthToken",v,this),Object(pe.a)(this,"OAuthPassed",y,this),Object(pe.a)(this,"loading",O,this),Object(pe.a)(this,"user",g,this),Object(pe.a)(this,"setIsAuthed",w,this),Object(pe.a)(this,"setNotAuthed",j,this),Object(pe.a)(this,"setLoading",k,this),Object(pe.a)(this,"setUser",F,this)},d=Object(fe.a)(m.prototype,"OAuthUrl",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(fe.a)(m.prototype,"OAuthToken",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=Object(fe.a)(m.prototype,"OAuthPassed",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(fe.a)(m.prototype,"loading",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(fe.a)(m.prototype,"user",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ve("")}}),w=Object(fe.a)(m.prototype,"setIsAuthed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.OAuthPassed=!0}}}),j=Object(fe.a)(m.prototype,"setNotAuthed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.OAuthPassed=!1}}}),k=Object(fe.a)(m.prototype,"setLoading",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.loading=t}}}),F=Object(fe.a)(m.prototype,"setUser",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.user=t}}}),m),dt=new function e(){Object(A.a)(this,e)},vt=new(Be=be.d.bound,Te=be.d.bound,Re=be.d.bound,Ge=be.d.bound,qe=be.d.bound,Je=be.d.bound,Ve=be.d.bound,We=be.d.bound,$e=be.d.bound,He=be.d.bound,Ke=be.d.bound,Qe=be.d.bound,Xe=function e(){var t=this;Object(A.a)(this,e),this.playingAlbum=void 0,Object(pe.a)(this,"files",Ye,this),Object(pe.a)(this,"sourceCloud",Ze,this),Object(pe.a)(this,"client",et,this),Object(pe.a)(this,"playNow",tt,this),Object(pe.a)(this,"isPlay",nt,this),Object(pe.a)(this,"setCloud",at,this),Object(pe.a)(this,"setClient",rt,this),Object(pe.a)(this,"fetchFiles",it,this),Object(pe.a)(this,"fetchFilesAlbum",lt,this),Object(pe.a)(this,"playFile",ct,this),Object(pe.a)(this,"setNowDuration",ot,this),Object(pe.a)(this,"play",st,this),Object(pe.a)(this,"pause",ut,this),Object(pe.a)(this,"switchPlay",ht,this),Object(pe.a)(this,"getNext",pt,this),Object(pe.a)(this,"getPrev",ft,this),Object(pe.a)(this,"setMode",bt,this),this.getPlayingAlbum=function(e,n){for(var a=0;a<n.files.length;a++)if("File"===n.files[a].type){if(n.files[a].content.fullPath===e){var r=new ue;return r.files=n.files.filter(function(e){return"Folder"!==e.type}),r}}else{var i=t.getPlayingAlbum(e,n.files[a].content);if(i.files.length>0)return i}return new ue}},Ye=Object(fe.a)(Xe.prototype,"files",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ze=Object(fe.a)(Xe.prototype,"sourceCloud",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),et=Object(fe.a)(Xe.prototype,"client",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=Object(fe.a)(Xe.prototype,"playNow",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new de(new me("","","",0,""),"","")}}),nt=Object(fe.a)(Xe.prototype,"isPlay",[be.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),at=Object(fe.a)(Xe.prototype,"setCloud",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.sourceCloud=t}}}),rt=Object(fe.a)(Xe.prototype,"setClient",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.client=t}}}),it=Object(fe.a)(Xe.prototype,"fetchFiles",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.client.getAllFiles();case 2:e.files=t.sent;case 3:case"end":return t.stop()}},t,this)}))}}),lt=Object(fe.a)(Xe.prototype,"fetchFilesAlbum",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.files){t.next=6;break}return t.next=3,e.client.getAllFilesAlbums();case 3:e.files=t.sent,t.next=11;break;case 6:return t.next=8,e.client.getAllFiles();case 8:return t.next=10,e.client.getAllFilesAlbums();case 10:e.files=t.sent;case 11:case"end":return t.stop()}},t,this)}))}}),ct=Object(fe.a)(Xe.prototype,"playFile",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(M.a)(D.a.mark(function t(n){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.playingAlbum=e.getPlayingAlbum(n,e.client.filesetFiles),e.client.playFile(n).then(function(t){e.playNow=t,e.isPlay=!0});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}}),ot=Object(fe.a)(Xe.prototype,"setNowDuration",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.playNow.audio.duration=t}}}),st=Object(fe.a)(Xe.prototype,"play",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!0}}}),ut=Object(fe.a)(Xe.prototype,"pause",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!1}}}),ht=Object(fe.a)(Xe.prototype,"switchPlay",[$e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isPlay=!e.isPlay}}}),pt=Object(fe.a)(Xe.prototype,"getNext",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){var n,a,r,i,l,c,o,s;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.playNow.fullPath,a=e.client.mapOfFiles.findIndex(function(e){return e.content.fullPath===n}),t.t0=e.client.mode,t.next="repeat"===t.t0?5:"shuffle"===t.t0?18:33;break;case 5:if("album"!==e.client.checkspace){t.next=14;break}return r=e.playingAlbum,i=(i=r.files.findIndex(function(e){return e.content.fullPath===n}))>=r.files.length-1?0:i+1,t.next=11,e.client.playFile(r.files[i].content.fullPath);case 11:e.playNow=t.sent,t.next=17;break;case 14:return t.next=16,e.client.playFile(e.client.mapOfFiles[a].content.fullPath);case 16:e.playNow=t.sent;case 17:return t.abrupt("break",37);case 18:if("album"!==e.client.checkspace){t.next=27;break}return l=e.playingAlbum,l.files.findIndex(function(e){return e.content.fullPath===n}),c=Math.floor(Math.random()*l.files.length),t.next=24,e.client.playFile(l.files[c].content.fullPath);case 24:e.playNow=t.sent,t.next=32;break;case 27:return o=e.client.mapOfFiles[Math.floor(Math.random()*e.client.mapOfFiles.length)],t.next=30,e.client.playFile(o.content.fullPath);case 30:e.playNow=t.sent,e.playingAlbum=e.getPlayingAlbum(n,e.client.filesetFiles);case 32:return t.abrupt("break",37);case 33:return s=a===e.client.mapOfFiles.length-1?0:a+1,t.next=36,e.client.playFile(e.client.mapOfFiles[s].content.fullPath);case 36:e.playNow=t.sent;case 37:case"end":return t.stop()}},t,this)}))}}),ft=Object(fe.a)(Xe.prototype,"getPrev",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(M.a)(D.a.mark(function t(){var n;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isPlay=!0,n=0===(n=e.client.mapOfFiles.findIndex(function(t){return t.content.fullPath===e.playNow.fullPath}))?0:n-1,t.abrupt("return",e.playFile(e.client.mapOfFiles[n].content.fullPath));case 4:case"end":return t.stop()}},t,this)}))}}),bt=Object(fe.a)(Xe.prototype,"setMode",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.client.checkspace=n,e.client.mode=t}}}),Xe),yt=new function e(){Object(A.a)(this,e),this.AuthStore=mt,this.CommonStore=dt,this.FilesStore=vt};window.store=yt,N.a.render(E.a.createElement(q.a,{store:yt},E.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[173,2,1]]]);
//# sourceMappingURL=main.12523ddb.chunk.js.map